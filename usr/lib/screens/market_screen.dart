import 'package:flutter/material.dart';\n\nclass MarketScreen extends StatefulWidget {\n  const MarketScreen({super.key});\n\n  @override\n  State<MarketScreen> createState() => _MarketScreenState();\n}\n\nclass _MarketScreenState extends State<MarketScreen>\n    with SingleTickerProviderStateMixin {\n  late TabController _tabController;\n\n  @override\n  void initState() {\n    super.initState();\n    _tabController = TabController(length: 3, vsync: this);\n  }\n\n  @override\n  void dispose() {\n    _tabController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      backgroundColor: Theme.of(context).colorScheme.surface,\n      appBar: AppBar(\n        title: const Text(\n          'Nexora Market',\n          style: TextStyle(fontWeight: FontWeight.bold),\n        ),\n        actions: [\n          IconButton(\n            icon: const Icon(Icons.search),\n            onPressed: () {},\n          ),\n          IconButton(\n            icon: const Icon(Icons.shopping_cart_outlined),\n            onPressed: () {},\n          ),\n        ],\n        bottom: TabBar(\n          controller: _tabController,\n          tabs: const [\n            Tab(text: 'Browse'),\n            Tab(text: 'Freelancers'),\n            Tab(text: 'My Orders'),\n          ],\n        ),\n      ),\n      body: TabBarView(\n        controller: _tabController,\n        children: [\n          _buildBrowseTab(),\n          _buildFreelancersTab(),\n          _buildOrdersTab(),\n        ],\n      ),\n      floatingActionButton: FloatingActionButton.extended(\n        onPressed: () {},\n        icon: const Icon(Icons.add),\n        label: const Text('Sell'),\n      ),\n    );\n  }\n\n  Widget _buildBrowseTab() {\n    return SingleChildScrollView(\n      child: Column(\n        crossAxisAlignment: CrossAxisAlignment.start,\n        children: [\n          // Categories\n          SizedBox(\n            height: 120,\n            child: ListView(\n              scrollDirection: Axis.horizontal,\n              padding: const EdgeInsets.all(16),\n              children: [\n                _buildCategoryCard('Electronics', Icons.devices, Colors.blue),\n                _buildCategoryCard('Fashion', Icons.shopping_bag, Colors.pink),\n                _buildCategoryCard('Home', Icons.home, Colors.orange),\n                _buildCategoryCard('Books', Icons.book, Colors.green),\n                _buildCategoryCard('Sports', Icons.sports_basketball, Colors.red),\n              ],\n            ),\n          ),\n\n          // Featured Products\n          Padding(\n            padding: const EdgeInsets.all(16),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.start,\n              children: [\n                Row(\n                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                  children: [\n                    const Text(\n                      'Trending Products',\n                      style: TextStyle(\n                        fontSize: 18,\n                        fontWeight: FontWeight.bold,\n                      ),\n                    ),\n                    TextButton(\n                      onPressed: () {},\n                      child: const Text('View All'),\n                    ),\n                  ],\n                ),\n                const SizedBox(height: 12),\n                GridView.builder(\n                  shrinkWrap: true,\n                  physics: const NeverScrollableScrollPhysics(),\n                  gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(\n                    crossAxisCount: 2,\n                    childAspectRatio: 0.7,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                  ),\n                  itemCount: 6,\n                  itemBuilder: (context, index) {\n                    return _buildProductCard(\n                      'Product ${index + 1}',\n                      '\$${(index + 1) * 29}.99',\n                      4.5 + (index * 0.1),\n                      index % 2 == 0,\n                    );\n                  },\n                ),\n              ],\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildFreelancersTab() {\n    return ListView.builder(\n      padding: const EdgeInsets.all(16),\n      itemCount: 8,\n      itemBuilder: (context, index) {\n        return _buildFreelancerCard(\n          'Freelancer ${index + 1}',\n          index % 3 == 0\n              ? 'UI/UX Designer'\n              : index % 3 == 1\n                  ? 'Full Stack Developer'\n                  : 'Content Writer',\n          '\$${(index + 2) * 15}/hr',\n          4.8 - (index * 0.1),\n          (index + 5) * 10,\n          index % 4 == 0,\n        );\n      },\n    );\n  }\n\n  Widget _buildOrdersTab() {\n    return ListView.builder(\n      padding: const EdgeInsets.all(16),\n      itemCount: 5,\n      itemBuilder: (context, index) {\n        return _buildOrderCard(\n          'Order #${1000 + index}',\n          'Product ${index + 1}',\n          '\$${(index + 1) * 49}.99',\n          index % 3 == 0\n              ? 'Delivered'\n              : index % 3 == 1\n                  ? 'In Transit'\n                  : 'Processing',\n        );\n      },\n    );\n  }\n\n  Widget _buildCategoryCard(String title, IconData icon, Color color) {\n    return Container(\n      width: 100,\n      margin: const EdgeInsets.only(right: 12),\n      decoration: BoxDecoration(\n        color: color.withOpacity(0.1),\n        borderRadius: BorderRadius.circular(12),\n      ),\n      child: Column(\n        mainAxisAlignment: MainAxisAlignment.center,\n        children: [\n          Icon(icon, color: color, size: 32),\n          const SizedBox(height: 8),\n          Text(\n            title,\n            style: TextStyle(\n              color: color,\n              fontWeight: FontWeight.bold,\n              fontSize: 13,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildProductCard(\n    String name,\n    String price,\n    double rating,\n    bool isVerified,\n  ) {\n    return Container(\n      decoration: BoxDecoration(\n        color: Theme.of(context).colorScheme.surfaceContainerHighest,\n        borderRadius: BorderRadius.circular(12),\n      ),\n      child: Column(\n        crossAxisAlignment: CrossAxisAlignment.start,\n        children: [\n          Expanded(\n            child: Stack(\n              children: [\n                Container(\n                  decoration: BoxDecoration(\n                    color: Colors.grey.shade300,\n                    borderRadius: const BorderRadius.only(\n                      topLeft: Radius.circular(12),\n                      topRight: Radius.circular(12),\n                    ),\n                  ),\n                  child: const Center(\n                    child: Icon(Icons.image, size: 48, color: Colors.grey),\n                  ),\n                ),\n                if (isVerified)\n                  Positioned(\n                    top: 8,\n                    right: 8,\n                    child: Container(\n                      padding: const EdgeInsets.all(4),\n                      decoration: const BoxDecoration(\n                        color: Colors.blue,\n                        shape: BoxShape.circle,\n                      ),\n                      child: const Icon(\n                        Icons.verified,\n                        color: Colors.white,\n                        size: 16,\n                      ),\n                    ),\n                  ),\n              ],\n            ),\n          ),\n          Padding(\n            padding: const EdgeInsets.all(12),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.start,\n              children: [\n                Text(\n                  name,\n                  style: const TextStyle(\n                    fontWeight: FontWeight.bold,\n                    fontSize: 14,\n                  ),\n                  maxLines: 1,\n                  overflow: TextOverflow.ellipsis,\n                ),\n                const SizedBox(height: 4),\n                Row(\n                  children: [\n                    const Icon(Icons.star, color: Colors.amber, size: 14),\n                    const SizedBox(width: 4),\n                    Text(\n                      rating.toStringAsFixed(1),\n                      style: const TextStyle(fontSize: 12),\n                    ),\n                  ],\n                ),\n                const SizedBox(height: 4),\n                Text(\n                  price,\n                  style: TextStyle(\n                    color: Theme.of(context).colorScheme.primary,\n                    fontWeight: FontWeight.bold,\n                    fontSize: 16,\n                  ),\n                ),\n              ],\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildFreelancerCard(\n    String name,\n    String profession,\n    String rate,\n    double rating,\n    int jobs,\n    bool isVerified,\n  ) {\n    return Container(\n      margin: const EdgeInsets.only(bottom: 12),\n      padding: const EdgeInsets.all(16),\n      decoration: BoxDecoration(\n        color: Theme.of(context).colorScheme.surfaceContainerHighest,\n        borderRadius: BorderRadius.circular(12),\n      ),\n      child: Row(\n        children: [\n          Stack(\n            children: [\n              CircleAvatar(\n                radius: 30,\n                backgroundColor: Theme.of(context).colorScheme.primaryContainer,\n                child: Icon(\n                  Icons.person,\n                  size: 32,\n                  color: Theme.of(context).colorScheme.primary,\n                ),\n              ),\n              if (isVerified)\n                Positioned(\n                  bottom: 0,\n                  right: 0,\n                  child: Container(\n                    padding: const EdgeInsets.all(2),\n                    decoration: const BoxDecoration(\n                      color: Colors.blue,\n                      shape: BoxShape.circle,\n                    ),\n                    child: const Icon(\n                      Icons.verified,\n                      color: Colors.white,\n                      size: 14,\n                    ),\n                  ),\n                ),\n            ],\n          ),\n          const SizedBox(width: 16),\n          Expanded(\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.start,\n              children: [\n                Text(\n                  name,\n                  style: const TextStyle(\n                    fontWeight: FontWeight.bold,\n                    fontSize: 16,\n                  ),\n                ),\n                const SizedBox(height: 4),\n                Text(\n                  profession,\n                  style: TextStyle(\n                    color: Theme.of(context).colorScheme.outline,\n                    fontSize: 13,\n                  ),\n                ),\n                const SizedBox(height: 8),\n                Row(\n                  children: [\n                    const Icon(Icons.star, color: Colors.amber, size: 14),\n                    const SizedBox(width: 4),\n                    Text(\n                      rating.toStringAsFixed(1),\n                      style: const TextStyle(fontSize: 12),\n                    ),\n                    const SizedBox(width: 12),\n                    Icon(\n                      Icons.work_outline,\n                      size: 14,\n                      color: Theme.of(context).colorScheme.outline,\n                    ),\n                    const SizedBox(width: 4),\n                    Text(\n                      '$jobs jobs',\n                      style: const TextStyle(fontSize: 12),\n                    ),\n                  ],\n                ),\n              ],\n            ),\n          ),\n          Column(\n            crossAxisAlignment: CrossAxisAlignment.end,\n            children: [\n              Text(\n                rate,\n                style: TextStyle(\n                  color: Theme.of(context).colorScheme.primary,\n                  fontWeight: FontWeight.bold,\n                  fontSize: 15,\n                ),\n              ),\n              const SizedBox(height: 8),\n              ElevatedButton(\n                onPressed: () {},\n                style: ElevatedButton.styleFrom(\n                  padding: const EdgeInsets.symmetric(\n                    horizontal: 16,\n                    vertical: 8,\n                  ),\n                ),\n                child: const Text('Hire'),\n              ),\n            ],\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildOrderCard(\n    String orderId,\n    String productName,\n    String price,\n    String status,\n  ) {\n    Color statusColor;\n    switch (status) {\n      case 'Delivered':\n        statusColor = Colors.green;\n        break;\n      case 'In Transit':\n        statusColor = Colors.blue;\n        break;\n      default:\n        statusColor = Colors.orange;\n    }\n\n    return Container(\n      margin: const EdgeInsets.only(bottom: 12),\n      padding: const EdgeInsets.all(16),\n      decoration: BoxDecoration(\n        color: Theme.of(context).colorScheme.surfaceContainerHighest,\n        borderRadius: BorderRadius.circular(12),\n      ),\n      child: Column(\n        crossAxisAlignment: CrossAxisAlignment.start,\n        children: [\n          Row(\n            mainAxisAlignment: MainAxisAlignment.spaceBetween,\n            children: [\n              Text(\n                orderId,\n                style: const TextStyle(\n                  fontWeight: FontWeight.bold,\n                  fontSize: 15,\n                ),\n              ),\n              Container(\n                padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 4),\n                decoration: BoxDecoration(\n                  color: statusColor.withOpacity(0.1),\n                  borderRadius: BorderRadius.circular(8),\n                ),\n                child: Text(\n                  status,\n                  style: TextStyle(\n                    color: statusColor,\n                    fontWeight: FontWeight.bold,\n                    fontSize: 12,\n                  ),\n                ),\n              ),\n            ],\n          ),\n          const SizedBox(height: 8),\n          Text(\n            productName,\n            style: TextStyle(\n              color: Theme.of(context).colorScheme.outline,\n              fontSize: 13,\n            ),\n          ),\n          const SizedBox(height: 8),\n          Row(\n            mainAxisAlignment: MainAxisAlignment.spaceBetween,\n            children: [\n              Text(\n                price,\n                style: TextStyle(\n                  color: Theme.of(context).colorScheme.primary,\n                  fontWeight: FontWeight.bold,\n                  fontSize: 16,\n                ),\n              ),\n              Row(\n                children: [\n                  if (status == 'In Transit' || status == 'Delivered')\n                    TextButton.icon(\n                      onPressed: () {},\n                      icon: const Icon(Icons.location_on, size: 16),\n                      label: const Text('Track'),\n                    ),\n                  if (status == 'Delivered')\n                    TextButton(\n                      onPressed: () {},\n                      child: const Text('Review'),\n                    ),\n                ],\n              ),\n            ],\n          ),\n        ],\n      ),\n    );\n  }\n}